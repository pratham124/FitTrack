/**
 * @remix-run/router v1.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D.apply(this,arguments)}var N;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(N||(N={}));const Ye="popstate";function Er(e){e===void 0&&(e={});function t(n,a){let{pathname:c,search:s,hash:u}=n.location;return De("",{pathname:c,search:s,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:te(a)}return jt(t,r,null,e)}function U(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function le(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function zt(){return Math.random().toString(36).substr(2,8)}function Ge(e,t){return{usr:e.state,key:e.key,idx:t}}function De(e,t,r,n){return r===void 0&&(r=null),D({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?re(t):t,{state:r,key:t&&t.key||n||zt()})}function te(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function re(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function jt(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:c=!1}=n,s=a.history,u=N.Pop,f=null,w=h();w==null&&(w=0,s.replaceState(D({},s.state,{idx:w}),""));function h(){return(s.state||{idx:null}).idx}function g(){u=N.Pop;let o=h(),E=o==null?null:o-w;w=o,f&&f({action:u,location:L.location,delta:E})}function M(o,E){u=N.Push;let F=De(L.location,o,E);r&&r(F,o),w=h()+1;let x=Ge(F,w),T=L.createHref(F);try{s.pushState(x,"",T)}catch{a.location.assign(T)}c&&f&&f({action:u,location:L.location,delta:1})}function _(o,E){u=N.Replace;let F=De(L.location,o,E);r&&r(F,o),w=h();let x=Ge(F,w),T=L.createHref(F);s.replaceState(x,"",T),c&&f&&f({action:u,location:L.location,delta:0})}function I(o){let E=a.location.origin!=="null"?a.location.origin:a.location.href,F=typeof o=="string"?o:te(o);return U(E,"No window.location.(origin|href) available to create URL for href: "+F),new URL(F,E)}let L={get action(){return u},get location(){return e(a,s)},listen(o){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(Ye,g),f=o,()=>{a.removeEventListener(Ye,g),f=null}},createHref(o){return t(a,o)},createURL:I,encodeLocation(o){let E=I(o);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:M,replace:_,go(o){return s.go(o)}};return L}var z;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(z||(z={}));const Nt=new Set(["lazy","caseSensitive","path","id","index","children"]);function kt(e){return e.index===!0}function lt(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((a,c)=>{let s=[...r,c],u=typeof a.id=="string"?a.id:s.join("-");if(U(a.index!==!0||!a.children,"Cannot specify children on an index route"),U(!n[u],'Found a route id collision on id "'+u+`".  Route id's must be globally unique within Data Router usages`),kt(a)){let f=D({},a,{hasErrorBoundary:t(a),id:u});return n[u]=f,f}else{let f=D({},a,{id:u,hasErrorBoundary:t(a),children:void 0});return n[u]=f,a.children&&(f.children=lt(a.children,t,s,n)),f}})}function be(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?re(t):t,a=je(n.pathname||"/",r);if(a==null)return null;let c=st(e);Bt(c);let s=null;for(let u=0;s==null&&u<c.length;++u)s=qt(c[u],Zt(a));return s}function st(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(c,s,u)=>{let f={relativePath:u===void 0?c.path||"":u,caseSensitive:c.caseSensitive===!0,childrenIndex:s,route:c};f.relativePath.startsWith("/")&&(U(f.relativePath.startsWith(n),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(n.length));let w=we([n,f.relativePath]),h=r.concat(f);c.children&&c.children.length>0&&(U(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),st(c.children,t,h,w)),!(c.path==null&&!c.index)&&t.push({path:w,score:Gt(w,c.index),routesMeta:h})};return e.forEach((c,s)=>{var u;if(c.path===""||!((u=c.path)!=null&&u.includes("?")))a(c,s);else for(let f of dt(c.path))a(c,s,f)}),t}function dt(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),c=r.replace(/\?$/,"");if(n.length===0)return a?[c,""]:[c];let s=dt(n.join("/")),u=[];return u.push(...s.map(f=>f===""?c:[c,f].join("/"))),a&&u.push(...s),u.map(f=>e.startsWith("/")&&f===""?"/":f)}function Bt(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Xt(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Ht=/^:\w+$/,Wt=3,$t=2,Kt=1,Vt=10,Yt=-2,Xe=e=>e==="*";function Gt(e,t){let r=e.split("/"),n=r.length;return r.some(Xe)&&(n+=Yt),t&&(n+=$t),r.filter(a=>!Xe(a)).reduce((a,c)=>a+(Ht.test(c)?Wt:c===""?Kt:Vt),n)}function Xt(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function qt(e,t){let{routesMeta:r}=e,n={},a="/",c=[];for(let s=0;s<r.length;++s){let u=r[s],f=s===r.length-1,w=a==="/"?t:t.slice(a.length)||"/",h=Jt({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},w);if(!h)return null;Object.assign(n,h.params);let g=u.route;c.push({params:n,pathname:we([a,h.pathname]),pathnameBase:ar(we([a,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(a=we([a,h.pathnameBase]))}return c}function Jt(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Qt(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let c=a[0],s=c.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:n.reduce((w,h,g)=>{if(h==="*"){let M=u[g]||"";s=c.slice(0,c.length-M.length).replace(/(.)\/+$/,"$1")}return w[h]=er(u[g]||"",h),w},{}),pathname:c,pathnameBase:s,pattern:e}}function Qt(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),le(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(s,u)=>(n.push(u),"/([^\\/]+)"));return e.endsWith("*")?(n.push("*"),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Zt(e){try{return decodeURI(e)}catch(t){return le(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function er(e,t){try{return decodeURIComponent(e)}catch(r){return le(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function je(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function tr(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?re(e):e;return{pathname:r?r.startsWith("/")?r:rr(r,t):t,search:or(n),hash:ir(a)}}function rr(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Ie(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ct(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function nr(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=re(e):(a=D({},e),U(!a.pathname||!a.pathname.includes("?"),Ie("?","pathname","search",a)),U(!a.pathname||!a.pathname.includes("#"),Ie("#","pathname","hash",a)),U(!a.search||!a.search.includes("#"),Ie("#","search","hash",a)));let c=e===""||a.pathname==="",s=c?"/":a.pathname,u;if(n||s==null)u=r;else{let g=t.length-1;if(s.startsWith("..")){let M=s.split("/");for(;M[0]==="..";)M.shift(),g-=1;a.pathname=M.join("/")}u=g>=0?t[g]:"/"}let f=tr(a,u),w=s&&s!=="/"&&s.endsWith("/"),h=(c||s===".")&&r.endsWith("/");return!f.pathname.endsWith("/")&&(w||h)&&(f.pathname+="/"),f}const we=e=>e.join("/").replace(/\/\/+/g,"/"),ar=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),or=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ir=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,xr=function(t,r){r===void 0&&(r=302);let n=r;typeof n=="number"?n={status:n}:typeof n.status>"u"&&(n.status=302);let a=new Headers(n.headers);return a.set("Location",t),new Response(null,D({},n,{headers:a}))};class ut{constructor(t,r,n,a){a===void 0&&(a=!1),this.status=t,this.statusText=r||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function lr(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ft=["post","put","patch","delete"],sr=new Set(ft),dr=["get",...ft],cr=new Set(dr),ur=new Set([301,302,303,307,308]),fr=new Set([307,308]),Oe={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},hr={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},qe={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ht=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pr=!pt,mr=e=>!!e.hasErrorBoundary;function Pr(e){U(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let t=e.detectErrorBoundary||mr,r={},n=lt(e.routes,t,void 0,r),a,c=D({v7_normalizeFormMethod:!1},e.future),s=null,u=new Set,f=null,w=null,h=null,g=e.hydrationData!=null,M=be(n,e.history.location,e.basename),_=null;if(M==null){let i=Y(404,{pathname:e.history.location.pathname}),{matches:l,route:d}=nt(n);M=l,_={[d.id]:i}}let I=!M.some(i=>i.route.lazy)&&(!M.some(i=>i.route.loader)||e.hydrationData!=null),L,o={historyAction:e.history.action,location:e.history.location,matches:M,initialized:I,navigation:Oe,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||_,fetchers:new Map,blockers:new Map},E=N.Pop,F=!1,x,T=!1,S=!1,O=[],k=[],C=new Map,se=0,de=-1,ce=new Map,Me=new Set,ne=new Map,Q=new Map,q=new Map,Pe=!1;function wt(){return s=e.history.listen(i=>{let{action:l,location:d,delta:p}=i;if(Pe){Pe=!1;return}le(q.size===0||p!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let m=$e({currentLocation:o.location,nextLocation:d,historyAction:l});if(m&&p!=null){Pe=!0,e.history.go(p*-1),xe(m,{state:"blocked",location:d,proceed(){xe(m,{state:"proceeding",proceed:void 0,reset:void 0,location:d}),e.history.go(p)},reset(){he(m),H({blockers:new Map(L.state.blockers)})}});return}return J(l,d)}),o.initialized||J(N.Pop,o.location),L}function Rt(){s&&s(),u.clear(),x&&x.abort(),o.fetchers.forEach((i,l)=>Ae(l)),o.blockers.forEach((i,l)=>he(l))}function Dt(i){return u.add(i),()=>u.delete(i)}function H(i){o=D({},o,i),u.forEach(l=>l(o))}function ue(i,l){var d,p;let m=o.actionData!=null&&o.navigation.formMethod!=null&&X(o.navigation.formMethod)&&o.navigation.state==="loading"&&((d=i.state)==null?void 0:d._isRedirect)!==!0,v;l.actionData?Object.keys(l.actionData).length>0?v=l.actionData:v=null:m?v=o.actionData:v=null;let b=l.loaderData?rt(o.loaderData,l.loaderData,l.matches||[],l.errors):o.loaderData;for(let[y]of q)he(y);let R=F===!0||o.navigation.formMethod!=null&&X(o.navigation.formMethod)&&((p=i.state)==null?void 0:p._isRedirect)!==!0;a&&(n=a,a=void 0),H(D({},l,{actionData:v,loaderData:b,historyAction:E,location:i,initialized:!0,navigation:Oe,revalidation:"idle",restoreScrollPosition:Ke(i,l.matches||o.matches),preventScrollReset:R,blockers:new Map(o.blockers)})),T||E===N.Pop||(E===N.Push?e.history.push(i,i.state):E===N.Replace&&e.history.replace(i,i.state)),E=N.Pop,F=!1,T=!1,S=!1,O=[],k=[]}async function Ne(i,l){if(typeof i=="number"){e.history.go(i);return}let{path:d,submission:p,error:m}=Je(i,c,l),v=o.location,b=De(o.location,d,l&&l.state);b=D({},b,e.history.encodeLocation(b));let R=l&&l.replace!=null?l.replace:void 0,y=N.Push;R===!0?y=N.Replace:R===!1||p!=null&&X(p.formMethod)&&p.formAction===o.location.pathname+o.location.search&&(y=N.Replace);let A=l&&"preventScrollReset"in l?l.preventScrollReset===!0:void 0,P=$e({currentLocation:v,nextLocation:b,historyAction:y});if(P){xe(P,{state:"blocked",location:b,proceed(){xe(P,{state:"proceeding",proceed:void 0,reset:void 0,location:b}),Ne(i,l)},reset(){he(P),H({blockers:new Map(o.blockers)})}});return}return await J(y,b,{submission:p,pendingError:m,preventScrollReset:A,replace:l&&l.replace})}function Mt(){if(Se(),H({revalidation:"loading"}),o.navigation.state!=="submitting"){if(o.navigation.state==="idle"){J(o.historyAction,o.location,{startUninterruptedRevalidation:!0});return}J(E||o.historyAction,o.navigation.location,{overrideNavigation:o.navigation})}}async function J(i,l,d){x&&x.abort(),x=null,E=i,T=(d&&d.startUninterruptedRevalidation)===!0,Ft(o.location,o.matches),F=(d&&d.preventScrollReset)===!0;let p=a||n,m=d&&d.overrideNavigation,v=be(p,l,e.basename);if(!v){let j=Y(404,{pathname:l.pathname}),{matches:B,route:K}=nt(p);Ue(),ue(l,{matches:B,loaderData:{},errors:{[K.id]:j}});return}if(wr(o.location,l)&&!(d&&d.submission&&X(d.submission.formMethod))){ue(l,{matches:v});return}x=new AbortController;let b=ve(e.history,l,x.signal,d&&d.submission),R,y;if(d&&d.pendingError)y={[oe(v).route.id]:d.pendingError};else if(d&&d.submission&&X(d.submission.formMethod)){let j=await Et(b,l,d.submission,v,{replace:d.replace});if(j.shortCircuited)return;R=j.pendingActionData,y=j.pendingActionError,m=D({state:"loading",location:l},d.submission),b=new Request(b.url,{signal:b.signal})}let{shortCircuited:A,loaderData:P,errors:$}=await xt(b,l,v,m,d&&d.submission,d&&d.fetcherSubmission,d&&d.replace,R,y);A||(x=null,ue(l,D({matches:v},R?{actionData:R}:{},{loaderData:P,errors:$})))}async function Et(i,l,d,p,m){Se();let v=D({state:"submitting",location:l},d);H({navigation:v});let b,R=ze(p,l);if(!R.route.action&&!R.route.lazy)b={type:z.error,error:Y(405,{method:i.method,pathname:l.pathname,routeId:R.route.id})};else if(b=await ye("action",i,R,p,r,t,L.basename),i.signal.aborted)return{shortCircuited:!0};if(ie(b)){let y;return m&&m.replace!=null?y=m.replace:y=b.location===o.location.pathname+o.location.search,await fe(o,b,{submission:d,replace:y}),{shortCircuited:!0}}if(Re(b)){let y=oe(p,R.route.id);return(m&&m.replace)!==!0&&(E=N.Push),{pendingActionData:{},pendingActionError:{[y.route.id]:b.error}}}if(ee(b))throw Y(400,{type:"defer-action"});return{pendingActionData:{[R.route.id]:b.data}}}async function xt(i,l,d,p,m,v,b,R,y){let A=p;A||(A=D({state:"loading",location:l,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},m));let P=m||v?m||v:A.formMethod&&A.formAction&&A.formData&&A.formEncType?{formMethod:A.formMethod,formAction:A.formAction,formData:A.formData,formEncType:A.formEncType}:void 0,$=a||n,[j,B]=Qe(e.history,o,d,P,l,S,O,k,ne,$,e.basename,R,y);if(Ue(W=>!(d&&d.some(V=>V.route.id===W))||j&&j.some(V=>V.route.id===W)),j.length===0&&B.length===0)return ue(l,D({matches:d,loaderData:{},errors:y||null},R?{actionData:R}:{})),{shortCircuited:!0};if(!T){B.forEach(V=>{let Z=o.fetchers.get(V.key),ge={state:"loading",data:Z&&Z.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};o.fetchers.set(V.key,ge)});let W=R||o.actionData;H(D({navigation:A},W?Object.keys(W).length===0?{actionData:null}:{actionData:W}:{},B.length>0?{fetchers:new Map(o.fetchers)}:{}))}de=++se,B.forEach(W=>C.set(W.key,x));let{results:K,loaderResults:pe,fetcherResults:Ce}=await Be(o.matches,d,j,B,i);if(i.signal.aborted)return{shortCircuited:!0};B.forEach(W=>C.delete(W.key));let me=at(K);if(me)return await fe(o,me,{replace:b}),{shortCircuited:!0};let{loaderData:ae,errors:Fe}=tt(o,d,j,pe,y,B,Ce,Q);Q.forEach((W,V)=>{W.subscribe(Z=>{(Z||W.done)&&Q.delete(V)})}),At();let Te=We(de);return D({loaderData:ae,errors:Fe},Te||B.length>0?{fetchers:new Map(o.fetchers)}:{})}function ke(i){return o.fetchers.get(i)||hr}function Pt(i,l,d,p){if(pr)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");C.has(i)&&Ee(i);let v=be(a||n,d,e.basename);if(!v){Le(i,l,Y(404,{pathname:d}));return}let{path:b,submission:R}=Je(d,c,p,!0),y=ze(v,b);if(F=(p&&p.preventScrollReset)===!0,R&&X(R.formMethod)){St(i,l,b,y,v,R);return}ne.set(i,{routeId:l,path:b}),Lt(i,l,b,y,v,R)}async function St(i,l,d,p,m,v){if(Se(),ne.delete(i),!p.route.action&&!p.route.lazy){let G=Y(405,{method:v.formMethod,pathname:d,routeId:l});Le(i,l,G);return}let b=o.fetchers.get(i),R=D({state:"submitting"},v,{data:b&&b.data," _hasFetcherDoneAnything ":!0});o.fetchers.set(i,R),H({fetchers:new Map(o.fetchers)});let y=new AbortController,A=ve(e.history,d,y.signal,v);C.set(i,y);let P=await ye("action",A,p,m,r,t,L.basename);if(A.signal.aborted){C.get(i)===y&&C.delete(i);return}if(ie(P)){C.delete(i),Me.add(i);let G=D({state:"loading"},v,{data:void 0," _hasFetcherDoneAnything ":!0});return o.fetchers.set(i,G),H({fetchers:new Map(o.fetchers)}),fe(o,P,{submission:v,isFetchActionRedirect:!0})}if(Re(P)){Le(i,l,P.error);return}if(ee(P))throw Y(400,{type:"defer-action"});let $=o.navigation.location||o.location,j=ve(e.history,$,y.signal),B=a||n,K=o.navigation.state!=="idle"?be(B,o.navigation.location,e.basename):o.matches;U(K,"Didn't find any matches after fetcher action");let pe=++se;ce.set(i,pe);let Ce=D({state:"loading",data:P.data},v,{" _hasFetcherDoneAnything ":!0});o.fetchers.set(i,Ce);let[me,ae]=Qe(e.history,o,K,v,$,S,O,k,ne,B,e.basename,{[p.route.id]:P.data},void 0);ae.filter(G=>G.key!==i).forEach(G=>{let _e=G.key,Ve=o.fetchers.get(_e),Ot={state:"loading",data:Ve&&Ve.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};o.fetchers.set(_e,Ot),C.set(_e,y)}),H({fetchers:new Map(o.fetchers)});let{results:Fe,loaderResults:Te,fetcherResults:W}=await Be(o.matches,K,me,ae,j);if(y.signal.aborted)return;ce.delete(i),C.delete(i),ae.forEach(G=>C.delete(G.key));let V=at(Fe);if(V)return fe(o,V);let{loaderData:Z,errors:ge}=tt(o,o.matches,me,Te,void 0,ae,W,Q),_t={state:"idle",data:P.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};o.fetchers.set(i,_t);let It=We(pe);o.navigation.state==="loading"&&pe>de?(U(E,"Expected pending action"),x&&x.abort(),ue(o.navigation.location,{matches:K,loaderData:Z,errors:ge,fetchers:new Map(o.fetchers)})):(H(D({errors:ge,loaderData:rt(o.loaderData,Z,K,ge)},It?{fetchers:new Map(o.fetchers)}:{})),S=!1)}async function Lt(i,l,d,p,m,v){let b=o.fetchers.get(i),R=D({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},v,{data:b&&b.data," _hasFetcherDoneAnything ":!0});o.fetchers.set(i,R),H({fetchers:new Map(o.fetchers)});let y=new AbortController,A=ve(e.history,d,y.signal);C.set(i,y);let P=await ye("loader",A,p,m,r,t,L.basename);if(ee(P)&&(P=await vt(P,A.signal,!0)||P),C.get(i)===y&&C.delete(i),A.signal.aborted)return;if(ie(P)){await fe(o,P);return}if(Re(P)){let j=oe(o.matches,l);o.fetchers.delete(i),H({fetchers:new Map(o.fetchers),errors:{[j.route.id]:P.error}});return}U(!ee(P),"Unhandled fetcher deferred data");let $={state:"idle",data:P.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};o.fetchers.set(i,$),H({fetchers:new Map(o.fetchers)})}async function fe(i,l,d){var p;let{submission:m,replace:v,isFetchActionRedirect:b}=d===void 0?{}:d;l.revalidate&&(S=!0);let R=De(i.location,l.location,D({_isRedirect:!0},b?{_isFetchActionRedirect:!0}:{}));if(U(R,"Expected a location on the redirect navigation"),ht.test(l.location)&&pt&&typeof((p=window)==null?void 0:p.location)<"u"){let B=e.history.createURL(l.location),K=je(B.pathname,e.basename||"/")==null;if(window.location.origin!==B.origin||K){v?window.location.replace(l.location):window.location.assign(l.location);return}}x=null;let y=v===!0?N.Replace:N.Push,{formMethod:A,formAction:P,formEncType:$,formData:j}=i.navigation;!m&&A&&P&&j&&$&&(m={formMethod:A,formAction:P,formEncType:$,formData:j}),fr.has(l.status)&&m&&X(m.formMethod)?await J(y,R,{submission:D({},m,{formAction:l.location}),preventScrollReset:F}):b?await J(y,R,{overrideNavigation:{state:"loading",location:R,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},fetcherSubmission:m,preventScrollReset:F}):await J(y,R,{overrideNavigation:{state:"loading",location:R,formMethod:m?m.formMethod:void 0,formAction:m?m.formAction:void 0,formEncType:m?m.formEncType:void 0,formData:m?m.formData:void 0},preventScrollReset:F})}async function Be(i,l,d,p,m){let v=await Promise.all([...d.map(y=>ye("loader",m,y,l,r,t,L.basename)),...p.map(y=>y.matches&&y.match?ye("loader",ve(e.history,y.path,m.signal),y.match,y.matches,r,t,L.basename):{type:z.error,error:Y(404,{pathname:y.path})})]),b=v.slice(0,d.length),R=v.slice(d.length);return await Promise.all([ot(i,d,b,m.signal,!1,o.loaderData),ot(i,p.map(y=>y.match),R,m.signal,!0)]),{results:v,loaderResults:b,fetcherResults:R}}function Se(){S=!0,O.push(...Ue()),ne.forEach((i,l)=>{C.has(l)&&(k.push(l),Ee(l))})}function Le(i,l,d){let p=oe(o.matches,l);Ae(i),H({errors:{[p.route.id]:d},fetchers:new Map(o.fetchers)})}function Ae(i){C.has(i)&&Ee(i),ne.delete(i),ce.delete(i),Me.delete(i),o.fetchers.delete(i)}function Ee(i){let l=C.get(i);U(l,"Expected fetch controller: "+i),l.abort(),C.delete(i)}function He(i){for(let l of i){let p={state:"idle",data:ke(l).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};o.fetchers.set(l,p)}}function At(){let i=[];for(let l of Me){let d=o.fetchers.get(l);U(d,"Expected fetcher: "+l),d.state==="loading"&&(Me.delete(l),i.push(l))}He(i)}function We(i){let l=[];for(let[d,p]of ce)if(p<i){let m=o.fetchers.get(d);U(m,"Expected fetcher: "+d),m.state==="loading"&&(Ee(d),ce.delete(d),l.push(d))}return He(l),l.length>0}function Ut(i,l){let d=o.blockers.get(i)||qe;return q.get(i)!==l&&q.set(i,l),d}function he(i){o.blockers.delete(i),q.delete(i)}function xe(i,l){let d=o.blockers.get(i)||qe;U(d.state==="unblocked"&&l.state==="blocked"||d.state==="blocked"&&l.state==="blocked"||d.state==="blocked"&&l.state==="proceeding"||d.state==="blocked"&&l.state==="unblocked"||d.state==="proceeding"&&l.state==="unblocked","Invalid blocker state transition: "+d.state+" -> "+l.state),o.blockers.set(i,l),H({blockers:new Map(o.blockers)})}function $e(i){let{currentLocation:l,nextLocation:d,historyAction:p}=i;if(q.size===0)return;q.size>1&&le(!1,"A router only supports one blocker at a time");let m=Array.from(q.entries()),[v,b]=m[m.length-1],R=o.blockers.get(v);if(!(R&&R.state==="proceeding")&&b({currentLocation:l,nextLocation:d,historyAction:p}))return v}function Ue(i){let l=[];return Q.forEach((d,p)=>{(!i||i(p))&&(d.cancel(),l.push(p),Q.delete(p))}),l}function Ct(i,l,d){if(f=i,h=l,w=d||(p=>p.key),!g&&o.navigation===Oe){g=!0;let p=Ke(o.location,o.matches);p!=null&&H({restoreScrollPosition:p})}return()=>{f=null,h=null,w=null}}function Ft(i,l){if(f&&w&&h){let d=l.map(m=>it(m,o.loaderData)),p=w(i,d)||i.key;f[p]=h()}}function Ke(i,l){if(f&&w&&h){let d=l.map(v=>it(v,o.loaderData)),p=w(i,d)||i.key,m=f[p];if(typeof m=="number")return m}return null}function Tt(i){a=i}return L={get basename(){return e.basename},get state(){return o},get routes(){return n},initialize:wt,subscribe:Dt,enableScrollRestoration:Ct,navigate:Ne,fetch:Pt,revalidate:Mt,createHref:i=>e.history.createHref(i),encodeLocation:i=>e.history.encodeLocation(i),getFetcher:ke,deleteFetcher:Ae,dispose:Rt,getBlocker:Ut,deleteBlocker:he,_internalFetchControllers:C,_internalActiveDeferreds:Q,_internalSetRoutes:Tt},L}function gr(e){return e!=null&&"formData"in e}function Je(e,t,r,n){n===void 0&&(n=!1);let a=typeof e=="string"?e:te(e);if(!r||!gr(r))return{path:a};if(r.formMethod&&!Mr(r.formMethod))return{path:a,error:Y(405,{method:r.formMethod})};let c;if(r.formData){let f=r.formMethod||"get";if(c={formMethod:t.v7_normalizeFormMethod?f.toUpperCase():f.toLowerCase(),formAction:yt(a),formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:r.formData},X(c.formMethod))return{path:a,submission:c}}let s=re(a),u=gt(r.formData);return n&&s.search&&bt(s.search)&&u.append("index",""),s.search="?"+u,{path:te(s),submission:c}}function yr(e,t){let r=e;if(t){let n=e.findIndex(a=>a.route.id===t);n>=0&&(r=e.slice(0,n))}return r}function Qe(e,t,r,n,a,c,s,u,f,w,h,g,M){let _=M?Object.values(M)[0]:g?Object.values(g)[0]:void 0,I=e.createURL(t.location),L=e.createURL(a),o=c||I.toString()===L.toString()||I.search!==L.search,E=M?Object.keys(M)[0]:void 0,x=yr(r,E).filter((S,O)=>{if(S.route.lazy)return!0;if(S.route.loader==null)return!1;if(vr(t.loaderData,t.matches[O],S)||s.some(se=>se===S.route.id))return!0;let k=t.matches[O],C=S;return Ze(S,D({currentUrl:I,currentParams:k.params,nextUrl:L,nextParams:C.params},n,{actionResult:_,defaultShouldRevalidate:o||mt(k,C)}))}),T=[];return f.forEach((S,O)=>{if(!r.some(de=>de.route.id===S.routeId))return;let k=be(w,S.path,h);if(!k){T.push(D({key:O},S,{matches:null,match:null}));return}let C=ze(k,S.path);if(u.includes(O)){T.push(D({key:O,matches:k,match:C},S));return}Ze(C,D({currentUrl:I,currentParams:t.matches[t.matches.length-1].params,nextUrl:L,nextParams:r[r.length-1].params},n,{actionResult:_,defaultShouldRevalidate:o}))&&T.push(D({key:O,matches:k,match:C},S))}),[x,T]}function vr(e,t,r){let n=!t||r.route.id!==t.route.id,a=e[r.route.id]===void 0;return n||a}function mt(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function Ze(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function et(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let a=r[e.id];U(a,"No route found in manifest");let c={};for(let s in n){let f=a[s]!==void 0&&s!=="hasErrorBoundary";le(!f,'Route "'+a.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!f&&!Nt.has(s)&&(c[s]=n[s])}Object.assign(a,c),Object.assign(a,{hasErrorBoundary:t(D({},a)),lazy:void 0})}async function ye(e,t,r,n,a,c,s,u,f,w){s===void 0&&(s="/"),u===void 0&&(u=!1),f===void 0&&(f=!1);let h,g,M,_=o=>{let E,F=new Promise((x,T)=>E=T);return M=()=>E(),t.signal.addEventListener("abort",M),Promise.race([o({request:t,params:r.params,context:w}),F])};try{let o=r.route[e];if(r.route.lazy)if(o)g=(await Promise.all([_(o),et(r.route,c,a)]))[0];else if(await et(r.route,c,a),o=r.route[e],o)g=await _(o);else{if(e==="action")throw Y(405,{method:t.method,pathname:new URL(t.url).pathname,routeId:r.route.id});return{type:z.data,data:void 0}}else U(o,"Could not find the "+e+' to run on the "'+r.route.id+'" route'),g=await _(o);U(g!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(o){h=z.error,g=o}finally{M&&t.signal.removeEventListener("abort",M)}if(Dr(g)){let o=g.status;if(ur.has(o)){let x=g.headers.get("Location");if(U(x,"Redirects returned/thrown from loaders/actions must have a Location header"),ht.test(x)){if(!u){let T=new URL(t.url),S=x.startsWith("//")?new URL(T.protocol+x):new URL(x),O=je(S.pathname,s)!=null;S.origin===T.origin&&O&&(x=S.pathname+S.search+S.hash)}}else{let T=n.slice(0,n.indexOf(r)+1),S=ct(T).map(k=>k.pathnameBase),O=nr(x,S,new URL(t.url).pathname);if(U(te(O),"Unable to resolve redirect location: "+x),s){let k=O.pathname;O.pathname=k==="/"?s:we([s,k])}x=te(O)}if(u)throw g.headers.set("Location",x),g;return{type:z.redirect,status:o,location:x,revalidate:g.headers.get("X-Remix-Revalidate")!==null}}if(f)throw{type:h||z.data,response:g};let E,F=g.headers.get("Content-Type");return F&&/\bapplication\/json\b/.test(F)?E=await g.json():E=await g.text(),h===z.error?{type:h,error:new ut(o,g.statusText,E),headers:g.headers}:{type:z.data,data:E,statusCode:g.status,headers:g.headers}}if(h===z.error)return{type:h,error:g};if(Rr(g)){var I,L;return{type:z.deferred,deferredData:g,statusCode:(I=g.init)==null?void 0:I.status,headers:((L=g.init)==null?void 0:L.headers)&&new Headers(g.init.headers)}}return{type:z.data,data:g}}function ve(e,t,r,n){let a=e.createURL(yt(t)).toString(),c={signal:r};if(n&&X(n.formMethod)){let{formMethod:s,formEncType:u,formData:f}=n;c.method=s.toUpperCase(),c.body=u==="application/x-www-form-urlencoded"?gt(f):f}return new Request(a,c)}function gt(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,n instanceof File?n.name:n);return t}function br(e,t,r,n,a){let c={},s=null,u,f=!1,w={};return r.forEach((h,g)=>{let M=t[g].route.id;if(U(!ie(h),"Cannot handle redirect results in processLoaderData"),Re(h)){let _=oe(e,M),I=h.error;n&&(I=Object.values(n)[0],n=void 0),s=s||{},s[_.route.id]==null&&(s[_.route.id]=I),c[M]=void 0,f||(f=!0,u=lr(h.error)?h.error.status:500),h.headers&&(w[M]=h.headers)}else ee(h)?(a.set(M,h.deferredData),c[M]=h.deferredData.data):c[M]=h.data,h.statusCode!=null&&h.statusCode!==200&&!f&&(u=h.statusCode),h.headers&&(w[M]=h.headers)}),n&&(s=n,c[Object.keys(n)[0]]=void 0),{loaderData:c,errors:s,statusCode:u||200,loaderHeaders:w}}function tt(e,t,r,n,a,c,s,u){let{loaderData:f,errors:w}=br(t,r,n,a,u);for(let h=0;h<c.length;h++){let{key:g,match:M}=c[h];U(s!==void 0&&s[h]!==void 0,"Did not find corresponding fetcher result");let _=s[h];if(Re(_)){let I=oe(e.matches,M==null?void 0:M.route.id);w&&w[I.route.id]||(w=D({},w,{[I.route.id]:_.error})),e.fetchers.delete(g)}else if(ie(_))U(!1,"Unhandled fetcher revalidation redirect");else if(ee(_))U(!1,"Unhandled fetcher deferred data");else{let I={state:"idle",data:_.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};e.fetchers.set(g,I)}}return{loaderData:f,errors:w}}function rt(e,t,r,n){let a=D({},t);for(let c of r){let s=c.route.id;if(t.hasOwnProperty(s)?t[s]!==void 0&&(a[s]=t[s]):e[s]!==void 0&&c.route.loader&&(a[s]=e[s]),n&&n.hasOwnProperty(s))break}return a}function oe(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function nt(e){let t=e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Y(e,t){let{pathname:r,routeId:n,method:a,type:c}=t===void 0?{}:t,s="Unknown Server Error",u="Unknown @remix-run/router error";return e===400?(s="Bad Request",a&&r&&n?u="You made a "+a+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":c==="defer-action"&&(u="defer() is not supported in actions")):e===403?(s="Forbidden",u='Route "'+n+'" does not match URL "'+r+'"'):e===404?(s="Not Found",u='No route matches URL "'+r+'"'):e===405&&(s="Method Not Allowed",a&&r&&n?u="You made a "+a.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":a&&(u='Invalid request method "'+a.toUpperCase()+'"')),new ut(e||500,s,new Error(u),!0)}function at(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(ie(r))return r}}function yt(e){let t=typeof e=="string"?re(e):e;return te(D({},t,{hash:""}))}function wr(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash!==t.hash}function ee(e){return e.type===z.deferred}function Re(e){return e.type===z.error}function ie(e){return(e&&e.type)===z.redirect}function Rr(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function Dr(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function Mr(e){return cr.has(e.toLowerCase())}function X(e){return sr.has(e.toLowerCase())}async function ot(e,t,r,n,a,c){for(let s=0;s<r.length;s++){let u=r[s],f=t[s];if(!f)continue;let w=e.find(g=>g.route.id===f.route.id),h=w!=null&&!mt(w,f)&&(c&&c[f.route.id])!==void 0;ee(u)&&(a||h)&&await vt(u,n,a).then(g=>{g&&(r[s]=g||r[s])})}}async function vt(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:z.data,data:e.deferredData.unwrappedData}}catch(a){return{type:z.error,error:a}}return{type:z.data,data:e.deferredData.data}}}function bt(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function it(e,t){let{route:r,pathname:n,params:a}=e;return{id:r.id,pathname:n,params:a,data:t[r.id],handle:r.handle}}function ze(e,t){let r=typeof t=="string"?re(t).search:t.search;if(e[e.length-1].route.index&&bt(r||""))return e[e.length-1];let n=ct(e);return n[n.length-1]}export{N as A,ut as E,lr as a,Er as b,Pr as c,te as d,xr as e,ct as g,U as i,we as j,be as m,re as p,nr as r,je as s};
